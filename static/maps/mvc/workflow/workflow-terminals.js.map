{"version":3,"file":"workflow-terminals.js","sources":["../../../src/mvc/workflow/workflow-terminals.js"],"names":["define","Globals","CollectionTypeDescription","collectionType","this","isCollection","rank","split","length","$","extend","prototype","append","otherCollectionTypeDescription","NULL_COLLECTION_TYPE_DESCRIPTION","ANY_COLLECTION_TYPE_DESCRIPTION","otherCollectionType","canMatch","canMapOver","requiredSuffix","_endsWith","effectiveMapOver","effectiveCollectionType","substring","equal","toString","str","suffix","indexOf","other","TerminalMapping","Backbone","Model","initialize","attr","mapOver","terminal","terminalMapping","disableMapOver","setMapOver","collectionTypeDescription","trigger","Terminal","element","connectors","connect","connector","push","node","markChanged","disconnect","splice","inArray","resetMappingIfNeeded","redraw","each","_","c","destroy","slice","destroyInvalidConnections","destroyIfInvalid","val","multiple","output_terminals","outputTerminal","isMappedOver","resetMapping","OutputTerminal","call","datatypes","hasConnectedOutputTerminals","hasConnectedMappedInputTerminals","mappedInputTerminals","mappedInput","noMappedInputs","hasMappedOverInputTerminals","connectedInput","handle2","BaseInputTerminal","update","input","canAccept","_inputFilled","attachable","reset","connected","inputFilled","_collectionAttached","inputsFilled","firstOutput","handle1","_mappingConstraints","constraints","first","values","connectedMappedInputTerminals","inputTerminal","_producesAcceptableDatatype","t","cat_outputs","Array","concat","post_job_actions","pja_i","pja","action_type","output_name","name","action_arguments","other_datatype_i","other_datatype","app","isSubType","_otherCollectionType","otherMapOver","InputTerminal","extensions","collection","other_output","thisMapOver","mappingConstraints","every","bind","InputCollectionTerminal","collectionTypes","collection_types","_effectiveMapOver","some","collectionTypeIndex","_effectiveCollectionTypes","map","effectiveCollectionTypes","OutputCollectionTerminal","collection_type","output","newCollectionType"],"mappings":"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"}