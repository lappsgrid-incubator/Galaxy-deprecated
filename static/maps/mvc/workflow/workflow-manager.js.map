{"version":3,"file":"workflow-manager.js","sources":["../../../src/mvc/workflow/workflow-manager.js"],"names":["define","Connector","Workflow","app","canvas_container","this","id_counter","nodes","name","has_changes","active_form_has_changes","$","extend","prototype","create_node","type","title_text","tool_id","node","prebuildNode","add_node","fit_canvas_to_nodes","canvas_manager","draw_overview","activate_node","id","element","attr","workflow","remove_node","active_node","clear_active_node","remove_all","wf","each","k","v","destroy","rectify_workflow_outputs","using_workflow_outputs","has_existing_pjas","workflow_outputs","length","post_job_actions","pja_id","pja","action_type","self","node_changed","pjas_to_rem","push","i","pja_name","output_terminals","ot_id","ot","create_pja","wo_name","output_name","action_arguments","reload_active_node","to_simple","input_connections","input_terminals","t","cons","connectors","c","handle1","act","node_data","tool_state","tool_errors","position","annotation","uuid","label","steps","from_simple","data","max_id","step","init_field_data","css","top","left","Math","max","parseInt","isArray","l","x","other_node","connect","redraw","undefined","callout","find","galaxy_config","root","check_changes_in_active_form","submit","make_inactive","showToolForm","form_html","make_active","force","layout","n_pred","successors","j","other","node_ids_by_level","level_parents","pred_k","sk","all_nodes","h_pad","v_pad","ids","sort","a","b","max_width","width","height","_","bounds_for_all_nodes","p","xmin","xmax","ymin","ymax","e","min","round_up","n","ceil","fix_delta","new_pos","bounds","parent","xmin_delta","ymin_delta","children"],"mappings":"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"}