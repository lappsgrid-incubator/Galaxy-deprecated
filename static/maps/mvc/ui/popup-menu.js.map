{"version":3,"file":"popup-menu.js","sources":["../../../src/mvc/ui/popup-menu.js"],"names":["define","PopupMenu","Backbone","View","extend","initialize","$button","options","this","size","$","menu","click","event","remove","_renderAndShow","clickEvent","render","$el","appendTo","css","_getShownPosition","show","_setUpCloseBehavior","addClass","hide","position","html","template","attr","length","find","each","i","option","func","children","call","preventDefault","id","_templateOptions","join","_","map","divider","header","href","target","check","menuWidth","width","x","pageX","Math","min","document","scrollLeft","window","max","top","pageY","left","closePopup","off","parent","err","contents","one","addItem","item","index","splice","removeItem","findIndexByHtml","has","findItemByHtml","toString","create","make_popupmenu","button_element","initial_options","convertedOptions","optionVal","optionKey","newOption","jQuery","type","push","convertLinksToOptions","$parent","selector","elem","$link","text","linkHref","linkTarget","confirmText","confirm","location","fromExistingDom","$buttonElement","$menuElement","menuElementLinkSelector","make_popup_menus","menuSelector","buttonSelectorBuildFn","popupMenusCreated","fromDom"],"mappings":"AAAAA,UAGG,WAKH,GAAIC,GAAYC,SAASC,KAAKC,QAK1BC,WAAY,SAAUC,EAASC,GAE3BC,KAAKF,QAAUA,EACVE,KAAKF,QAAQG,SACdD,KAAKF,QAAUI,EAAG,WAEtBF,KAAKD,QAAUA,KAGf,IAAII,GAAOH,IACXA,MAAKF,QAAQM,MAAO,SAAUC,GAI1B,MAFAH,GAAG,oBAAqBI,SACxBH,EAAKI,eAAgBF,IACd,KAKfE,eAAgB,SAAUC,GACtBR,KAAKS,SACLT,KAAKU,IAAIC,SAAU,QAASC,IAAKZ,KAAKa,kBAAmBL,IAAcM,OACvEd,KAAKe,uBAKTN,OAAQ,WAOJ,GALAT,KAAKU,IAAIM,SAAU,mBAAoBC,OAClCL,KAAMM,SAAW,aACjBC,KAAMnB,KAAKoB,SAAUpB,KAAKF,QAAQuB,KAAM,MAAQrB,KAAKD,UAGtDC,KAAKD,QAAQuB,OAAQ,CACrB,GAAInB,GAAOH,IAEXA,MAAKU,IAAIa,KAAM,MAAOC,KAAM,SAAUC,GAClC,GAAIC,GAASvB,EAAKJ,QAAQ0B,EAGtBC,GAAOC,MACPzB,EAAGF,MAAO4B,SAAU,sBAAuBxB,MAAO,SAAUC,GACxDqB,EAAOC,KAAKE,KAAM1B,EAAME,EAAOqB,GAI/BrB,EAAMyB,qBAMtB,MAAO9B,OAGXoB,SAAW,SAAUW,EAAIhC,GACrB,OACI,WAAYgC,EAAI,gCAAiC/B,KAAKgC,iBAAkBjC,GAAW,SACrFkC,KAAM,KAGZD,iBAAmB,SAAUjC,GACzB,MAAKA,GAAQuB,OAGNY,EAAEC,IAAKpC,EAAS,SAAU2B,GAC7B,GAAIA,EAAOU,QACP,MAAO,2BACJ,IAAIV,EAAOW,OACd,OAAS,kDAAmDX,EAAOP,KAAM,aAAcc,KAAM,GAEjG,IAAIK,GAASZ,EAAOY,MAAQ,sBACxBC,EAAWb,EAAe,OAAI,YAAcA,EAAOa,OAAS,IAAM,GAClEC,EAAWd,EAAe,QAAE,oCAAwC,EACxE,QACI,yCAA0CY,EAAM,IAAKC,EAAQ,IACzDC,EAAOd,EAAOP,KAClB,aACFc,KAAM,MACTA,KAAM,IAhBE,yBAoBfpB,kBAAoB,SAAUL,GAG1B,GAAIiC,GAAYzC,KAAKU,IAAIgC,QACrBC,EAAInC,EAAWoC,MAAQH,EAAY,CAKvC,OAFAE,GAAIE,KAAKC,IAAKH,EAAGzC,EAAG6C,UAAWC,aAAe9C,EAAG+C,QAASP,QAAUD,EAAY,GAChFE,EAAIE,KAAKK,IAAKP,EAAGzC,EAAG6C,UAAWC,aAAe,IAE1CG,IAAK3C,EAAW4C,MAChBC,KAAMV,IAMd5B,oBAAqB,WAKjB,QAASuC,KAEL,GADApD,EAAG6C,UAAWQ,IAAK,qBACfN,OAAOO,SAAWP,OAClB,IACI/C,EAAG+C,OAAOO,OAAOT,UAAWQ,IAAK,qBACnC,MAAOE,QAET,KACIvD,EAAG,sBAAuBwD,WAAWH,IAAK,qBAC5C,MAAOE,IAEbtD,EAAKG,SAfT,GAAIH,GAAOH,IAmBX,IADAE,EAAG,QAASyD,IAAK,oBAAqBL,GAClCL,OAAOO,SAAWP,OAClB,IACI/C,EAAG+C,OAAOO,OAAOT,UAAWxB,KAAM,QAASoC,IAAK,oBAAqBL,GACvE,MAAOG,QAET,KACIvD,EAAG,sBAAuBwD,WAAWC,IAAK,oBAAqBL,GACjE,MAAOG,MAKjBG,QAAS,SAAUC,EAAMC,GAIrB,MAFAA,GAAUA,GAAS,EAAMA,EAAQ9D,KAAKD,QAAQuB,OAC9CtB,KAAKD,QAAQgE,OAAQD,EAAO,EAAGD,GACxB7D,MAIXgE,WAAY,SAAUF,GAIlB,MAHIA,IAAQ,GACR9D,KAAKD,QAAQgE,OAAQD,EAAO,GAEzB9D,MAIXiE,gBAAiB,SAAU9C,GACvB,IAAK,GAAIM,GAAI,EAAGA,EAAIzB,KAAKD,QAAQuB,OAAQG,IACrC,GAAIS,EAAEgC,IAAKlE,KAAKD,QAAQ0B,GAAI,SAAczB,KAAKD,QAAQ0B,GAAGN,OAASA,EAC/D,MAAOM,EAGf,OAAO,OAIX0C,eAAgB,SAAUhD,GACtB,MAAOnB,MAAKD,QAAUC,KAAKiE,gBAAiB9C,KAIhDiD,SAAU,WACN,MAAO,cAqIX,OAjIJ3E,GAAU4E,OAAS,SAAkBvE,EAASC,GAC1C,MAAO,IAAIN,GAAWK,EAASC,IAcnCN,EAAU6E,eAAiB,SAAUC,EAAgBC,GACjD,GAAIC,KAgBJ,OAfAvC,GAAEV,KAAMgD,EAAiB,SAAUE,EAAWC,GAC1C,GAAIC,IAAczD,KAAMwD,EAGN,QAAdD,EACAE,EAAUvC,QAAS,EAGiB,aAA7BwC,OAAOC,KAAMJ,KACpBE,EAAUjD,KAAO+C,GAIrBD,EAAiBM,KAAMH,KAEpB,GAAInF,GAAWS,EAAGqE,GAAkBE,IAS/ChF,EAAUuF,sBAAwB,SAAUC,EAASC,GACjDD,EAAU/E,EAAG+E,GACbC,EAAWA,GAAY,GACvB,IAAInF,KAoCJ,OAnCAkF,GAAQ1D,KAAM2D,GAAW1D,KAAM,SAAU2D,GACrC,GAAIzD,MAAa0D,EAAQlF,EAAGiF,EAI5B,IADAzD,EAAOP,KAAOiE,EAAMC,OAChBD,EAAM/D,KAAM,QAAU,CACtB,GAAIiE,GAAcF,EAAM/D,KAAM,QAC1BkE,EAAcH,EAAM/D,KAAM,UAC1BmE,EAAcJ,EAAM/D,KAAM,UAE9BK,GAAOC,KAAO,WAGV,IAAI,GAAsB8D,QAASD,GAGnC,OAAQD,GAEJ,IAAK,UACDtC,OAAOO,OAAOkC,SAAWJ,CACzB,MAGJ,KAAK,OACDrC,OAAOE,IAAIuC,SAAWJ,CACtB,MAGJ,SACIrC,OAAOyC,SAAWJ,IAIlCvF,EAAQgF,KAAMrD,KAEX3B,GASXN,EAAUkG,gBAAkB,SAAUC,EAAgBC,EAAcC,GAChEF,EAAiB1F,EAAG0F,GACpBC,EAAe3F,EAAG2F,EAClB,IAAI9F,GAAUN,EAAUuF,sBAAuBa,EAAcC,EAG7D,OADAD,GAAavF,SACN,GAAIb,GAAWmG,EAAgB7F,IAW1CN,EAAUsG,iBAAmB,SAAUvC,EAAQwC,EAAcC,GACzDzC,EAASA,GAAUT,SAGnBiD,EAAeA,GAAgB,iBAE/BC,EAAwBA,GAAyB,SAAUJ,GACvD,MAAO,IAAMA,EAAaxE,KAAM,aAIpC,IAAI6E,KAOJ,OANAhG,GAAGsD,GAASjC,KAAMyE,GAAexE,KAAM,WACnC,GAAIqE,GAAkB3F,EAAGF,MACrB4F,EAAkB1F,EAAGsD,GAASjC,KAAM0E,EAAuBJ,EAAcrC,GAC7E0C,GAAkBnB,KAAMtF,EAAU0G,QAASP,EAAgBC,IAC3DD,EAAe5E,SAAU,WAEtBkF,GAKAzG"}