define(["mvc/base-mvc","utils/localization"],function(a,b){var c=Backbone.Model.extend(a.LoggableMixin).extend({urlRoot:galaxy_config.root+"api/users",defaults:{id:null,username:"("+b("anonymous user")+")",email:"",total_disk_usage:0,nice_total_disk_usage:"",quota_percent:null,is_admin:!1},initialize:function(a){this.log("User.initialize:",a),this.on("loaded",function(a,b){this.log(this+" has loaded:",a,b)}),this.on("change",function(a,b){this.log(this+" has changed:",a,b.changes)})},isAnonymous:function(){return!this.get("email")},isAdmin:function(){return this.get("is_admin")},loadFromApi:function(a,b){a=a||c.CURRENT_ID_STR,b=b||{};var d=this,e=b.success;return b.success=function(a,b){d.trigger("loaded",a,b),e&&e(a,b)},a===c.CURRENT_ID_STR&&(b.url=this.urlRoot+"/"+c.CURRENT_ID_STR),Backbone.Model.prototype.fetch.call(this,b)},clearSessionStorage:function(){for(var a in sessionStorage)0===a.indexOf("history:")?sessionStorage.removeItem(a):"history-panel"===a&&sessionStorage.removeItem(a)},toString:function(){var a=[this.get("username")];return this.get("id")&&(a.unshift(this.get("id")),a.push(this.get("email"))),"User("+a.join(":")+")"}});c.CURRENT_ID_STR="current",c.getCurrentUserFromApi=function(a){var b=new c;return b.loadFromApi(c.CURRENT_ID_STR,a),b};Backbone.Collection.extend(a.LoggableMixin).extend({model:c,urlRoot:galaxy_config.root+"api/users"});return{User:c}});
//# sourceMappingURL=../../../maps/mvc/user/user-model.js.map