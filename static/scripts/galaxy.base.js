function obj_length(a){if(void 0!==a.length)return a.length;var b=0;for(var c in a)b++;return b}function make_popupmenu(a,b){var c=a.data("menu_options");a.data("menu_options",b),c||a.bind("click.show_popup",function(b){return $(".popmenu-wrapper").remove(),setTimeout(function(){var c=$("<ul class='dropdown-menu' id='"+a.attr("id")+"-menu'></ul>"),d=a.data("menu_options");obj_length(d)<=0&&$("<li>No Options.</li>").appendTo(c),$.each(d,function(a,b){if(b){var d=b.action||b;c.append($("<li></li>").append($("<a>").attr("href",b.url).html(a).click(d)))}else c.append($("<li></li>").addClass("head").append($("<a href='#'></a>").html(a)))});var e=$("<div class='popmenu-wrapper' style='position: absolute;left: 0; top: -1000;'></div>").append(c).appendTo("body"),f=b.pageX-e.width()/2;f=Math.min(f,$(document).scrollLeft()+$(window).width()-$(e).width()-5),f=Math.max(f,$(document).scrollLeft()+5),e.css({top:b.pageY,left:f})},10),setTimeout(function(){var a=function(a){$(a).bind("click.close_popup",function(){$(".popmenu-wrapper").remove(),a.unbind("click.close_popup")})};a($(window.document)),a($(window.top.document));for(var b=window.top.frames.length;b--;){var c=$(window.top.frames[b].document);a(c)}},50),!1})}function make_popup_menus(a){a=a||document,$(a).find("div[popupmenu]").each(function(){var b={},c=$(this);c.find("a").each(function(){var a=$(this),c=a.get(0),d=c.getAttribute("confirm"),e=c.getAttribute("href"),f=c.getAttribute("target");b[a.text()]=e?{url:e,action:function(b){if(!d||confirm(d)){if(f)return window.open(e,f),!1;a.click()}else b.preventDefault()}}:null});var d=$(a).find("#"+c.attr("popupmenu"));d.find("a").bind("click",function(a){return a.stopPropagation(),!0}),make_popupmenu(d,b),d.addClass("popup"),c.remove()})}function replace_big_select_inputs(a,b,c){jQuery.fn.select2&&(void 0===a&&(a=20),void 0===b&&(b=3e3),c=c||$("select"),c.each(function(){var c=$(this).not("[multiple]"),d=c.find("option").length;a>d||d>b||c.hasClass("no-autocomplete")||c.refresh_select2()}))}function async_save_text(a,b,c,d,e,f,g,h,i){void 0===e&&(e=30),void 0===g&&(g=4),$("#"+a).click(function(){if(!($("#renaming-active").length>0)){var a,j=$("#"+b),k=j.text();a=f?$("<textarea></textarea>").attr({rows:g,cols:e}).text($.trim(k)):$("<input type='text'></input>").attr({value:$.trim(k),size:e}),a.attr("id","renaming-active"),a.blur(function(){$(this).remove(),j.show(),i&&i(a)}),a.keyup(function(e){if(27===e.keyCode)$(this).trigger("blur");else if(13===e.keyCode){var f={};f[d]=$(this).val(),$(this).trigger("blur"),$.ajax({url:c,data:f,error:function(){alert("Text editing for elt "+b+" failed")},success:function(b){""!==b?j.text(b):j.html("<em>None</em>"),i&&i(a)}})}}),h&&h(a),j.hide(),a.insertAfter(j),a.focus(),a.select()}})}function commatize(a){a+="";for(var b=/(\d+)(\d{3})/;b.test(a);)a=a.replace(b,"$1,$2");return a}function reset_tool_search(a){var b=$("#galaxy_tools").contents();if(0===b.length&&(b=$(document)),$(this).removeClass("search_active"),b.find(".toolTitle").removeClass("search_match"),b.find(".toolSectionBody").hide(),b.find(".toolTitle").show(),b.find(".toolPanelLabel").show(),b.find(".toolSectionWrapper").each(function(){"recently_used_wrapper"!==$(this).attr("id")?$(this).show():$(this).hasClass("user_pref_visible")&&$(this).show()}),b.find("#search-no-results").hide(),b.find("#search-spinner").hide(),a){var c=b.find("#tool-search-query");c.val("search tools")}}function init_refresh_on_change(){$("select[refresh_on_change='true']").off("change").change(function(){var a=$(this),b=a.val(),c=a.attr("refresh_on_change_values");if(c){c=c.split(",");var d=a.attr("last_selected_value");if(-1===$.inArray(b,c)&&-1===$.inArray(d,c))return}$(window).trigger("refresh_on_change"),$(document).trigger("convert_to_values"),a.get(0).form.submit()}),$(":checkbox[refresh_on_change='true']").off("click").click(function(){var a=$(this),b=a.val(),c=a.attr("refresh_on_change_values");if(c){c=c.split(",");var d=a.attr("last_selected_value");if(-1===$.inArray(b,c)&&-1===$.inArray(d,c))return}$(window).trigger("refresh_on_change"),a.get(0).form.submit()}),$("a[confirm]").off("click").click(function(){return confirm($(this).attr("confirm"))})}!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelRequestAnimationFrame=window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return b;return-1}),$.fn.makeAbsolute=function(a){return this.each(function(){var b=$(this),c=b.position();b.css({position:"absolute",marginLeft:0,marginTop:0,top:c.top,left:c.left,right:$(window).width()-(c.left+b.width())}),a&&b.remove().appendTo("body")})},$.fn.refresh_select2=function(){var a=$(this),b={placeholder:"Click to select",closeOnSelect:!a.is("[MULTIPLE]"),dropdownAutoWidth:!0,containerCssClass:"select2-minwidth"};return a.select2(b)},$.fn.make_text_editable=function(a){var b="num_cols"in a?a.num_cols:30,c="num_rows"in a?a.num_rows:4,d="use_textarea"in a?a.use_textarea:!1,e="on_finish"in a?a.on_finish:null,f="help_text"in a?a.help_text:null,g=$(this);return g.addClass("editable-text").click(function(f){if(!($(this).children(":input").length>0)){g.removeClass("editable-text");var h,i,j=function(a){g.find(":input").remove(),""!==a?g.text(a):g.html("<br>"),g.addClass("editable-text"),e&&e(a)},k="cur_text"in a?a.cur_text:g.text();d?(h=$("<textarea/>").attr({rows:c,cols:b}).text($.trim(k)).keyup(function(a){27===a.keyCode&&j(k)}),i=$("<button/>").text("Done").click(function(){return j(h.val()),!1})):h=$("<input type='text'/>").attr({value:$.trim(k),size:b}).blur(function(){j(k)}).keyup(function(a){27===a.keyCode?$(this).trigger("blur"):13===a.keyCode&&j($(this).val()),a.stopPropagation()}),g.text(""),g.append(h),i&&g.append(i),h.focus(),h.select(),f.stopPropagation()}}),f&&g.attr("title",f).tooltip(),g};var GalaxyAsync=function(a){this.url_dict={},this.log_action=void 0===a?!1:a};GalaxyAsync.prototype.set_func_url=function(a,b){this.url_dict[a]=b},GalaxyAsync.prototype.set_user_pref=function(a,b){var c=this.url_dict[arguments.callee];return void 0===c?!1:void $.ajax({url:c,data:{pref_name:a,pref_value:b},error:function(){return!1},success:function(){return!0}})},GalaxyAsync.prototype.log_user_action=function(a,b,c){if(this.log_action){var d=this.url_dict[arguments.callee];return void 0===d?!1:void $.ajax({url:d,data:{action:a,context:b,params:c},error:function(){return!1},success:function(){return!0}})}},jQuery.fn.preventDoubleSubmission=function(){return $(this).on("submit",function(a){var b=$(this);b.data("submitted")===!0?a.preventDefault():b.data("submitted",!0)}),this},$(document).ready(function(){init_refresh_on_change(),$.fn.tooltip&&($(".unified-panel-header [title]").tooltip({placement:"bottom"}),$("[title]").tooltip()),make_popup_menus(),replace_big_select_inputs(20,1500),$("a").click(function(){var a=$(this),b=parent.frames&&parent.frames.galaxy_main;if("galaxy_main"==a.attr("target")&&!b){var c=a.attr("href");c+=-1==c.indexOf("?")?"?":"&",c+="use_panels=True",a.attr("href",c),a.attr("target","_self")}return a})});
//# sourceMappingURL=../maps/galaxy.base.js.map